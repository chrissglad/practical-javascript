<!DOCTYPE html>

<html>
  <head>
    <title>Practical JavaScript</title>
  </head>

  <body>
    <script>
      var func = "function";

      // check storage support
      var storageSupport =
        !!localStorage &&
        typeof localStorage.getItem === func &&
        typeof localStorage.setItem === func &&
        typeof localStorage.removeItem === func;

      //show items
      console.log(getTodos());

      // get todos
      function getTodos() {
        if (storageSupport) {
          var todos;
          var lsItems = localStorage.getItem("todos");
          if (lsItems === null) {
            todos = [];
          } else {
            todos = JSON.parse(lsItems);
          }
          return todos;
        } else {
          console.log("browser storage not supported");
        }
      }

      //add item
      function addTodo(todo) {
        var todos = getTodos();
        todos.push(todo);
        console.log(todos);
        localStorage.setItem("todos", JSON.stringify(todos));
      }

      //edit item
      function editTodo(position, newValue) {
        var todos = getTodos();
        todos[position] = newValue;
        console.log(todos);
        localStorage.setItem("todos", JSON.stringify(todos));
      }

      //remove items
      function removeTodo(position) {
        var todos = getTodos();
        todos.splice(position, 1);
        console.log(todos);
        localStorage.setItem("todos", JSON.stringify(todos));
      }
    </script>
  </body>
</html>
